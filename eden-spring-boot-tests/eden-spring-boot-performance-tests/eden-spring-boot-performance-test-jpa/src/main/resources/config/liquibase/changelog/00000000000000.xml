<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd">

	<property name="now" value="now()" dbms="mysql,h2"/>
	<property name="now" value="sysdate" dbms="oracle"/>

	<changeSet id="00000000000000" author="eden">

		<createTable tableName="sample_user" remarks="用户表">
			<column name="id" type="bigint" remarks="主键">
				<constraints primaryKey="true" nullable="false"/>
			</column>
			<column name="login" type="varchar(20)" remarks="登录账户">
				<constraints unique="true" nullable="false" uniqueConstraintName="ux_user_login"/>
			</column>
			<column name="password_hash" type="varchar(70)" remarks="密码"/>
			<column name="email" type="varchar(100)" remarks="邮箱">
				<constraints unique="true" nullable="true" uniqueConstraintName="ux_user_email"/>
			</column>
			<column name="activated" type="boolean" valueBoolean="false" remarks="是否激活账户">
				<constraints nullable="false"/>
			</column>
			<column name="locked" type="boolean" valueBoolean="false" remarks="是否锁定账户">
				<constraints nullable="false"/>
			</column>
			<column name="lang_key" type="varchar(6)" remarks="语言"/>
			<column name="activation_key" type="varchar(20)" remarks="激活账户的代码"/>
			<column name="reset_key" type="varchar(20)" remarks="重置密码的代码"/>
			<column name="reset_date" type="timestamp" remarks="重置密码的时间">
				<constraints nullable="true"/>
			</column>
			<column name="created_by" type="varchar(20)" remarks="创建的账户">
				<constraints nullable="false"/>
			</column>
			<column name="created_date" type="timestamp" defaultValueDate="${now}" remarks="创建的时间">
				<constraints nullable="false"/>
			</column>
			<column name="last_modified_by" type="varchar(20)" remarks="最后修改的账户"/>
			<column name="last_modified_date" type="timestamp" remarks="最后修改的时间"/>
		</createTable>

		<loadData file="config/liquibase/data/licenses.csv" separator=";" tableName="sample_user">
			<column name="activated" type="boolean"/>
			<column name="locked" type="boolean"/>
			<column name="created_date" type="timestamp"/>
		</loadData>

	</changeSet>

</databaseChangeLog>
